extends BehaviorInterface

class_name BehaviorDefault

#-----------------------------------------------------------------------------------------------------------------------
func _ready() -> void:
    _idle()
#end

#-----------------------------------------------------------------------------------------------------------------------
func _on_idle_timer_timeout() -> void:
    _prepare_attack()
#end

#-----------------------------------------------------------------------------------------------------------------------
func _on_preparation_timer_timeout() -> void:
    _attack()
#end

#-----------------------------------------------------------------------------------------------------------------------
func _on_attack_timer_timeout() -> void:
    _idle()
#end

#-----------------------------------------------------------------------------------------------------------------------
func _on_mob_died() -> void:
    Signals.food_spawned.emit(_food_drop, get_parent().global_position)
#end

#-----------------------------------------------------------------------------------------------------------------------
func _prepare_attack() -> void:
    preparing_attack.emit()
    $PreparationTimer.start(2.0)
#end

#-----------------------------------------------------------------------------------------------------------------------
func _attack() -> void:
    attacking.emit()
    $AttackTimer.start(0.2)
#end

#-----------------------------------------------------------------------------------------------------------------------
func _idle() -> void:
    idling.emit()
    $IdleTimer.start((60.0 / _apm) - 1.2)
#end
